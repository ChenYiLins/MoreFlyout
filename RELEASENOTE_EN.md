# MoreFlyout

## Development log

### v1.1.2-health action1-2024.09.22

- The main purpose of this version is to fix the existing errors in the program, optimize the program structure and improve the log.
- Fixed a bug where the button on the home page was always closed when the Shell main program was opened.
- Fixed a bug caused by IsShownInSwitchers about AppWindow in Windows App Sdk. This property setting will become invalid after restarting Explorer. [Issues](https://github.com/Microsoft/Microsoft-UI-xaml/issues/10026) about this bug . At present, the solution is to use Hook to detect Explorer events, because directly detecting window messages will be invalid because the Hook is used by the main program, and no other effective solution has been found at present. (because Hook is not the most effective method, it will cause some performance consumption)
- Unified solution Nuget package, update Windows App Sdk to 1.6.
- English development logs have been added. The logs before the current version are translated based on Chinese logs using translation software, and some words may be unsatisfactory.
- In order to use Windows Community Toolkit normally, change the TargetFramework of the solution to 22621.
- Code quality update: some codes are revised, while some redundant variables are deleted and the codes are simplified.
- Introduce AOT function for MoreFlyout.Server, and at the same time, just mark some reflected codes to avoid clipping problems.
- Because of some force majeure factors, the clipping function has to be abandoned for MoreFlyout.Shell, and the program volume has become a little bloated. You can check [issue](https://github.com/ChenYiLins/MoreFlyout/issues/2) on github .
- The installer has been updated, and the generated registry key will be deleted when uninstalling the program.

### v1.1.1-2024.09.16

- Now fixed the bug that all buttons are off by default when the program starts.

### v1.1.0-2024.07.24

- delete MoreFlyout.Shell built by C++ and write it in C#.
-unify the. Net and Windows App SDK versions of MoreFlyout.Server and MoreFlyout.Shell
- Add a Preview branch as a Preview update, and merge it into the main branch when the update is completed. The preview branch may adopt the preview version of Window App SDK, but it will not merge into the main branch when the preview version is used.

### v1.0.0-2024.06.01

- In the branch CppVersion, I once considered changing the main program to C++ refactoring, but after many stress tests, I had to face the memory leak problem that is easy to occur when the C++ WinUI program runs for a long time, and decided to keep the main program written in C#, delete the tray icon function at the same time, and divide the project into MoreFlyout.Server and MoreFlyout.Shell. At the same time, the more flyout.shell part was written in C++ as the visual management shell of the program.

### v0.0.3-beta3-2024.03.12

- Changed the program structure, streamlined the template automatically generated by TemplateStudio before, and changed some names at the same time, for example, changing MainWindow to FlyoutWindow is more intuitive. Streamlined some logic codes.
- Thanks to [Simon Mourier](https://github.com/Smourier) for his [answer](https://stackoverflow.com/questions/78210920/) In-c-sharp-WinUI-a-crash-about-system-executioninexception-is-caused-for-unk, which successfully solved the serious collapse of winui caused by CG recycling.
- Change the whole window display to Flyout component display. Although the system Flyout doesn't actually use WinUI Flyout animation, the animation effect is very close.
- Upgrade the Windows App SDK from version 1.4 to version 1.5, and change the exit method of the whole program, so that the whole program will no longer crash because of the window crash. In the future, consider putting the function of detecting the window status into the tray icon.
- The program must be run as an administrator before it can be displayed on top of other applications.
- Added the function of full-screen detection of other windows. When other windows are full-screen (including full-screen game windows), Flyout will not be displayed.
- The tray icon function has been deleted. After searching for multi-party content, it seems to be a kind of helplessness that Windows App SDK does not provide a direct tray icon. Nowadays, the program is more and more intrusive to users, and the tray icon does not seem to be what users must want. However, the program itself has no direct window interface, and the tray icon is a good entrance for users to know the running status and setting functions of the program. After hiding the tray at the same time, the user has no direct setting window to enable the tray function again. Finally, I decided to add the tray again in the next update, and it cannot be hidden.
- The language file has been improved.
- Add tray icon function, and add power-on and self-start option.
- upgrade the Windows App SDK to 1.5.24000.

### v0.0.2-beta2

- Fixed the problem of dislocation of window position and size under the condition of high DPI.
The-Acrylic effect is created separately to prevent the window from becoming a solid color effect when it is out of focus.
- Add tray icon function.

## Update log

### v1.1.2-2024.10.06

1. Fixed a bug where the button on the home page was always closed when the Shell main program was opened [`9c18694`](https://github.com/ChenYiLins/MoreFlyout/commit/9c186940670a439e60b4e9b82d0a6de5b794abab).
2. Fixed a bug caused by IsShownInSwitchers about AppWindow in Windows App Sdk. This property setting will become invalid after restarting Explorer. [issue](https://github.com/Microsoft/Microsoft-UI-xaml/issues/10026) about this bug . At present, the solution is to use Hook to detect Explorer events, because directly detecting window messages will be invalid because the Hook is used by the main program, and no other effective solution has been found at present. (Because Hook is not the most effective method, it will cause some performance consumption.) [`B66Ba87`](https://github.com/ChenYiLins/MoreFlyout/commit/b66ba875ba850f2719ee92bfc6a11404c633a014)
3. Updated and unify the solution Nuget package, and update the Windows App Sdk to 1.6. Due to the Windows App Sdk, this version of MoreFlyout.Shell can't enable the trimming, resulting in the volume of the Shell almost doubling compared with the previous version.(But the volume of Server was unexpectedly reduced by almost one time.ðŸ¤£)
4. Updated the TargetFramework to 22621, in order to use Windows Community Toolkit normally, but the minimum version support will not be affected.
5. Added the AOT function for MoreFlyout.Server, and at the same time, just mark some reflected codes to avoid the clipping problem [`d415045`](https://github.com/ChenYiLins/MoreFlyout/commit/d41504595e0c03991c5696ccd4be8ca25bd5077d).
6. Fixed some code errors, and deleted some redundant variables to simplify the code [`16c2d03`](https://github.com/ChenYiLins/MoreFlyout/commit/16c2d03a5173e54a6574250cec0b6222833664e2).
7. Updated the installer, and the generated registry key will be deleted when uninstalling the program [`d82d4d9`](https://github.com/ChenYiLins/MoreFlyout/commit/d82d4d9892757ebcde4e0fa10bcb780c9d59205a).
8. Updated release note, you guess what you are reading nowðŸ˜‚.
9. Added the support for x86 and arm64. And one more thing, AOT isnot support to x86.

### v1.1.1-2024.09.18

1. The original program was changed to MoreFlyout.Server, and as a basic service part, the function of tray icon was deleted.
2. Add MoreFlyout.Shell as the visual management setting Shell of the program, and synchronize the Windows App SDK and. Net versions of the Server and shell.
3. Fixed a bug that existed at the beginning of v1.0.0: when the Shell main program was opened, the button on the home page was always closed.

- After testing, point 3 was not successfully fixed and will be fixed in the next version.

### v0.0.2-beta2-2024.03.11

1. Now it can provide normal Acrylic effect.
2. Now the program can be displayed on the tray icon normally.

### v0.0.1-beta1-2024.02.26

1. Basic function update.